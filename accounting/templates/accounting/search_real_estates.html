{% extends "starter-template.html" %}

{% block page_style %}
    <link rel="stylesheet" href="http://fk.github.io/select2-bootstrap-css/css/bootstrap.min.css">
    <!-- <link rel="stylesheet" href="http://select2.github.io/select2/select2-3.5.2/select2.css"> -->
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/select2/4.0.0/css/select2.min.css">
    <link rel="stylesheet" href="http://fk.github.io/select2-bootstrap-css/css/select2-bootstrap.css">
{% endblock %}

{% block page_content %}

<form class="form-horizontal" role="form">
  <div class="form-group">
    <label for="inputEmail3" class="col-sm-2 control-label">Email</label>
    <div class="col-sm-10">
      <input type="email" class="form-control" id="inputEmail3" placeholder="Email">
    </div>
  </div>
  <div class="form-group">
    <label for="inputPassword3" class="col-sm-2 control-label">Пароль</label>
    <div class="col-sm-10 select2-wrapper">
        <select class="js-example-data-ajax form-control">
<!--           <option value="3620194" selected="selected">select2/select2</option> -->
        </select>

      <!-- <select id="demonstrations" class="form-control">
    <option></option>
    <option value="master.html" selected>master</option>
    <option value="3.5.2.html">3.5.2</option>
    <option value="3.5.1.html">3.5.1</option>
    <option value="3.4.5.html">3.4.5</option>
    <option value="3.4.4.html">3.4.4</option>
    <option value="3.4.3.html">3.4.3</option>
    <option value="3.4.2.html">3.4.2</option>
    <option value="3.4.1.html">3.4.1</option>
    <option value="3.3.2.html">3.3.2</option>
      </select>-->
    </div>
  </div>
  <div class="form-group">
    <div class="col-sm-offset-2 col-sm-10">
      <button type="submit" class="btn btn-default">Найти</button>
    </div>
  </div>
</form>

{% endblock %}

{% block page_script %}
<!-- <script src="//select2.github.io/select2/select2-3.4.2/select2.js"></script> -->
<script src="//cdnjs.cloudflare.com/ajax/libs/select2/4.0.0/js/select2.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/select2/4.0.0/js/i18n/ru.js"></script>


<script>
    //https://select2.github.io/announcements-4.0.html
var $ajax = $(".js-example-data-ajax");
  $ajax.select2({
    ajax: {
      url: "/real_estates/options/",
      dataType: 'json',
      delay: 250,
      data: function (params) {
        return {
          q: params.term, // search term
          page: params.page
        };
      },
      processResults: function (data, params) {
        // parse the results into the format expected by Select2
        // since we are using custom formatting functions we do not need to
        // alter the remote JSON data, except to indicate that infinite
        // scrolling can be used
        params.page = params.page || 1;

        return {
          results: data.items,
          pagination: {
            more: (params.page * 30) < data.total_count
          }
        };
      },
      cache: true
    },
    escapeMarkup: function (markup) { return markup; },
    minimumInputLength: 3
  });
</script>
{% endblock %}